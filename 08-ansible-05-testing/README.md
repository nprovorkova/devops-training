### 8.5 Тестирование Roles - Наталия Проворкова
#### 0. Репозитории с решением
https://github.com/nprovorkova/kibana-role.git
<br>https://github.com/nprovorkova/filebeat-role.git
#### Molecule kibana-role
###### 1. Запустите molecule test внутри корневой директории elasticsearch-role, посмотрите на вывод команды.
#### 2. Перейдите в каталог с ролью kibana-role и создайте сценарий тестирования по умолчаню при помощи molecule init scenario --driver-name docker.
![2](imgs/2.png)
###### 3. Добавьте несколько разных дистрибутивов (centos:8, ubuntu:latest) для инстансов и протестируйте роль, исправьте найденные ошибки, если они есть.
#### 4. Добавьте несколько assert'ов в verify.yml файл, для проверки работоспособности kibana-role (проверка, что web отвечает, проверка логов, etc). Запустите тестирование роли повторно и проверьте, что оно прошло успешно.
![4-1](imgs/4-1.png)
![4-2](imgs/4-2.png)
![4-3](imgs/4-3.png)
![4-4](imgs/4-4.png)
![4-5](imgs/4-5.png)
###### 5. Повторите шаги 2-4 для filebeat-role.
###### 6. Добавьте новый тег на коммит с рабочим сценарием в соответствии с семантическим версионированием.

#### Molecule filebeat-role
#### 2. Перейдите в каталог с ролью kibana-role и создайте сценарий тестирования по умолчаню при помощи molecule init scenario --driver-name docker.
![f-2](imgs/f-2.png)
###### 3. Добавьте несколько разных дистрибутивов (centos:8, ubuntu:latest) для инстансов и протестируйте роль, исправьте найденные ошибки, если они есть.
#### 4. Добавьте несколько assert'ов в verify.yml файл, для проверки работоспособности kibana-role (проверка, что web отвечает, проверка логов, etc). Запустите тестирование роли повторно и проверьте, что оно прошло успешно.
![f-4-1](imgs/f-4-1.png)
![f-4-2](imgs/f-4-2.png)
![f-4-3](imgs/f-4-3.png)
![f-4-4](imgs/f-4-4.png)
![f-4-5](imgs/f-4-5.png)
#### Tox 
###### 1. Запустите docker run --privileged=True -v <path_to_repo>:/opt/elasticsearch-role -w /opt/elasticsearch-role -it <image_name> /bin/bash, где path_to_repo - путь до корня репозитория с elasticsearch-role на вашей файловой системе.
#### 2. Внутри контейнера выполните команду tox, посмотрите на вывод.
###### 3. Добавьте файл tox.ini в корень репозитория каждой своей роли.
###### 4. Создайте облегчённый сценарий для molecule. Проверьте его на исполнимость.
###### 5. Пропишите правильную команду в tox.ini для того чтобы запускался облегчённый сценарий.
###### 6. Запустите docker контейнер так, чтобы внутри оказались обе ваши роли.
#### 7. Зайдите поочерёдно в каждую из них и запустите команду tox. Убедитесь, что всё отработало успешно.
###### 8. Добавьте новый тег на коммит с рабочим сценарием в соответствии с семантическим версионированием.